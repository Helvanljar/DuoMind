(function (global) {
  const COOKIE_KEY = "duomind_lang";

  function setCookie(k, v, days = 365) {
    const d = new Date();
    d.setTime(d.getTime() + days * 86400000);
    document.cookie = k + "=" + encodeURIComponent(v) + ";expires=" + d.toUTCString() + ";path=/";
  }
  function getCookie(k) {
    const f = document.cookie.split("; ").find((p) => p.startsWith(k + "="));
    return f ? decodeURIComponent(f.split("=")[1]) : null;
  }

  const base = {
    "nav.dashboard": "Dashboard",
    "nav.settings": "Settings",
    "nav.history": "History",
    "nav.login": "Login",
    "nav.register": "Register",
    "nav.theme": "Theme",
    "nav.hello": "Hello",
    "home.title": "Welcome to DuoMind",
    "home.subtitle": "A focused, dual-LLM research copilot. Log in, set your keys, and start exploring.",
    "home.search": "Ask DuoMind to compare GPT and Gemini on a topic…",
    "home.guest": "You are currently in guest mode. Please register or log in to save history and API keys.",
    "home.dual": "Dual LLM",
    "home.dual.desc": "Run GPT + Gemini together and compare perspectives.",
    "home.byok": "BYOK",
    "home.byok.desc": "Bring your own API keys for full power and privacy.",
    "home.history": "History",
    "home.history.desc": "See your recent research sessions at a glance.",
    "login.title": "Login",
    "login.subtitle": "Log in to access your settings and history.",
    "login.email": "Email",
    "login.password": "Password",
    "login.button": "Login",
    "login.noaccount": "No account yet?",
    "login.registerlink": "Register",
    "register.title": "Create Account",
    "register.subtitle": "Username will be shown in the top right after login.",
    "register.username": "Username",
    "register.email": "Email",
    "register.password": "Password",
    "register.confirm": "Confirm password",
    "register.rules": "Password must be at least 8 characters, contain 2 digits, 1 special character, and 1 uppercase letter.",
    "register.button": "Register",
    "register.already": "Already have an account?",
    "register.loginlink": "Login",
    "footer.text": "AI Research Copilot • © 2025",
  };

  const dict = {
    en: base,
    de: {
      "nav.dashboard": "Übersicht",
      "nav.settings": "Einstellungen",
      "nav.history": "Verlauf",
      "nav.login": "Anmelden",
      "nav.register": "Registrieren",
      "nav.theme": "Theme",
      "nav.hello": "Hallo",
      "home.title": "Willkommen bei DuoMind",
      "home.subtitle": "Ein fokussierter Forschungs-Copilot mit zwei LLMs. Anmelden, Schlüssel setzen und starten.",
      "home.search": "Bitte DuoMind, GPT und Gemini zu einem Thema zu vergleichen…",
      "home.guest": "Du bist aktuell als Gast unterwegs. Bitte registriere dich oder melde dich an, um Verlauf und API-Keys zu speichern.",
      "home.dual": "Dual LLM",
      "home.dual.desc": "Führe GPT und Gemini gemeinsam aus und vergleiche Perspektiven.",
      "home.byok": "BYOK",
      "home.byok.desc": "Bring deine eigenen API-Keys für volle Leistung und Privatsphäre.",
      "home.history": "Verlauf",
      "home.history.desc": "Sieh dir deine jüngsten Recherchen auf einen Blick an.",
      "login.title": "Anmelden",
      "login.subtitle": "Melde dich an, um auf Einstellungen und Verlauf zuzugreifen.",
      "login.email": "E-Mail",
      "login.password": "Passwort",
      "login.button": "Anmelden",
      "login.noaccount": "Noch kein Konto?",
      "login.registerlink": "Registrieren",
      "register.title": "Konto erstellen",
      "register.subtitle": "Der Benutzername wird oben rechts nach dem Login angezeigt.",
      "register.username": "Benutzername",
      "register.email": "E-Mail",
      "register.password": "Passwort",
      "register.confirm": "Passwort bestätigen",
      "register.rules": "Passwort: min. 8 Zeichen, 2 Ziffern, 1 Sonderzeichen, 1 Großbuchstabe.",
      "register.button": "Registrieren",
      "register.already": "Schon ein Konto?",
      "register.loginlink": "Anmelden",
      "footer.text": "KI Research Copilot • © 2025",
    },
    fr: {
      "nav.dashboard": "Tableau de bord",
      "nav.settings": "Paramètres",
      "nav.history": "Historique",
      "nav.login": "Connexion",
      "nav.register": "Inscription",
      "nav.theme": "Thème",
      "home.title": "Bienvenue sur DuoMind",
      "home.subtitle": "Un copilote de recherche bi-LLM. Connectez-vous, définissez vos clés et commencez.",
      "home.search": "Demandez à DuoMind de comparer GPT et Gemini sur un sujet…",
      "home.guest": "Vous êtes actuellement en mode invité. Veuillez vous inscrire ou vous connecter pour enregistrer l’historique et les clés API.",
      "home.dual": "Dual LLM",
      "home.dual.desc": "Exécutez GPT et Gemini ensemble et comparez les points de vue.",
      "home.byok": "BYOK",
      "home.byok.desc": "Apportez vos propres clés API pour plus de puissance et de confidentialité.",
      "home.history": "Historique",
      "home.history.desc": "Consultez vos recherches récentes en un coup d’œil.",
      "login.title": "Connexion",
      "login.subtitle": "Connectez-vous pour accéder à vos paramètres et à l’historique.",
      "login.email": "E-mail",
      "login.password": "Mot de passe",
      "login.button": "Connexion",
      "login.noaccount": "Pas encore de compte ?",
      "login.registerlink": "S’inscrire",
      "register.title": "Créer un compte",
      "register.subtitle": "Le nom d’utilisateur sera affiché en haut à droite après connexion.",
      "register.username": "Nom d’utilisateur",
      "register.email": "E-mail",
      "register.password": "Mot de passe",
      "register.confirm": "Confirmer le mot de passe",
      "register.rules": "Mot de passe : ≥ 8 caractères, 2 chiffres, 1 caractère spécial, 1 majuscule.",
      "register.button": "S’inscrire",
      "register.already": "Vous avez déjà un compte ?",
      "register.loginlink": "Connexion",
      "footer.text": "Copilote de recherche IA • © 2025",
    },
    es: {
      "nav.dashboard": "Panel",
      "nav.settings": "Ajustes",
      "nav.history": "Historial",
      "nav.login": "Iniciar sesión",
      "nav.register": "Registrarse",
      "nav.theme": "Tema",
      "home.title": "Bienvenido a DuoMind",
      "home.subtitle": "Un copiloto de investigación con dos LLM. Inicia sesión, configura tus claves y empieza.",
      "home.search": "Pide a DuoMind que compare GPT y Gemini sobre un tema…",
      "home.guest": "Estás en modo invitado. Regístrate o inicia sesión para guardar historial y claves.",
      "home.dual": "Dual LLM",
      "home.dual.desc": "Ejecuta GPT y Gemini juntos y compara perspectivas.",
      "home.byok": "BYOK",
      "home.byok.desc": "Usa tus propias claves API para más potencia y privacidad.",
      "home.history": "Historial",
      "home.history.desc": "Consulta tus sesiones recientes de investigación.",
      "login.title": "Iniciar sesión",
      "login.subtitle": "Inicia sesión para acceder a tus ajustes e historial.",
      "login.email": "Correo",
      "login.password": "Contraseña",
      "login.button": "Entrar",
      "login.noaccount": "¿No tienes cuenta?",
      "login.registerlink": "Regístrate",
      "register.title": "Crear cuenta",
      "register.subtitle": "El nombre de usuario se mostrará arriba a la derecha tras iniciar sesión.",
      "register.username": "Usuario",
      "register.email": "Correo",
      "register.password": "Contraseña",
      "register.confirm": "Confirmar contraseña",
      "register.rules": "Contraseña: ≥ 8 caracteres, 2 dígitos, 1 especial, 1 mayúscula.",
      "register.button": "Registrarse",
      "register.already": "¿Ya tienes cuenta?",
      "register.loginlink": "Inicia sesión",
      "footer.text": "Copiloto de Investigación IA • © 2025",
    },
    vi: {
      "nav.dashboard": "Bảng điều khiển",
      "nav.settings": "Cài đặt",
      "nav.history": "Lịch sử",
      "nav.login": "Đăng nhập",
      "nav.register": "Đăng ký",
      "nav.theme": "Chủ đề",
      "home.title": "Chào mừng đến với DuoMind",
      "home.subtitle": "Trợ lý nghiên cứu dùng 2 LLM. Đăng nhập, đặt khóa và bắt đầu.",
      "home.search": "Hãy yêu cầu DuoMind so sánh GPT và Gemini về một chủ đề…",
      "home.guest": "Bạn đang ở chế độ khách. Hãy đăng ký hoặc đăng nhập để lưu lịch sử và API key.",
      "home.dual": "Dual LLM",
      "home.dual.desc": "Chạy GPT + Gemini cùng lúc và so sánh góc nhìn.",
      "home.byok": "BYOK",
      "home.byok.desc": "Dùng khóa API riêng của bạn để có sức mạnh và quyền riêng tư tối đa.",
      "home.history": "Lịch sử",
      "home.history.desc": "Xem nhanh các phiên nghiên cứu gần đây.",
      "login.title": "Đăng nhập",
      "login.subtitle": "Đăng nhập để truy cập cài đặt và lịch sử.",
      "login.email": "Email",
      "login.password": "Mật khẩu",
      "login.button": "Đăng nhập",
      "login.noaccount": "Chưa có tài khoản?",
      "login.registerlink": "Đăng ký",
      "register.title": "Tạo tài khoản",
      "register.subtitle": "Tên người dùng sẽ hiển thị ở góc phải sau khi đăng nhập.",
      "register.username": "Tên người dùng",
      "register.email": "Email",
      "register.password": "Mật khẩu",
      "register.confirm": "Xác nhận mật khẩu",
      "register.rules": "Mật khẩu ≥ 8 ký tự, ≥ 2 số, ≥ 1 ký tự đặc biệt, ≥ 1 chữ hoa.",
      "register.button": "Đăng ký",
      "register.already": "Đã có tài khoản?",
      "register.loginlink": "Đăng nhập",
      "footer.text": "Trợ lý nghiên cứu AI • © 2025",
    },
    ar: {
      "nav.dashboard": "لوحة",
      "nav.settings": "إعدادات",
      "nav.history": "السجل",
      "nav.login": "دخول",
      "nav.register": "تسجيل",
      "nav.theme": "سمة",
      "home.title": "مرحباً بك في DuoMind",
      "home.subtitle": "مساعد بحثي بنموذجين. سجّل الدخول، أضف المفاتيح، وابدأ.",
      "home.search": "اطلب من DuoMind مقارنة GPT و Gemini في موضوع…",
      "home.guest": "أنت الآن كضيف. سجّل أو ادخل لحفظ السجل ومفاتيح الـ API.",
      "home.dual": "نموذجان",
      "home.dual.desc": "شغّل GPT و Gemini معاً وقارن النتائج.",
      "home.byok": "BYOK",
      "home.byok.desc": "استخدم مفاتيحك الخاصة لمزيد من القوة والخصوصية.",
      "home.history": "السجل",
      "home.history.desc": "اعرض جلساتك البحثية الأخيرة.",
      "login.title": "تسجيل الدخول",
      "login.subtitle": "ادخل للوصول إلى الإعدادات والسجل.",
      "login.email": "البريد الإلكتروني",
      "login.password": "كلمة المرور",
      "login.button": "دخول",
      "login.noaccount": "لا تملك حساباً؟",
      "login.registerlink": "سجّل",
      "register.title": "إنشاء حساب",
      "register.subtitle": "سيظهر اسم المستخدم أعلى اليمين بعد الدخول.",
      "register.username": "اسم المستخدم",
      "register.email": "البريد الإلكتروني",
      "register.password": "كلمة المرور",
      "register.confirm": "تأكيد كلمة المرور",
      "register.rules": "الرقم السري يجب أن يكون 8 أحرف على الأقل مع رقمين وحرف خاص وحرف كبير.",
      "register.button": "تسجيل",
      "register.already": "لديك حساب؟",
      "register.loginlink": "دخول",
      "footer.text": "مساعد بحث بالذكاء الاصطناعي • © 2025",
    },

    /* ===== Portuguese ===== */
    pt: {
      "nav.dashboard": "Painel",
      "nav.settings": "Configurações",
      "nav.history": "Histórico",
      "nav.login": "Entrar",
      "nav.register": "Registrar",
      "nav.theme": "Tema",
      "home.title": "Bem-vindo ao DuoMind",
      "home.subtitle": "Um copiloto de pesquisa com dois LLMs. Faça login, defina suas chaves e comece.",
      "home.search": "Peça ao DuoMind para comparar GPT e Gemini sobre um tema…",
      "home.guest": "Você está no modo convidado. Entre ou registre-se para salvar histórico e chaves de API.",
      "home.dual": "Dual LLM",
      "home.dual.desc": "Execute GPT + Gemini juntos e compare perspectivas.",
      "home.byok": "BYOK",
      "home.byok.desc": "Use suas próprias chaves de API para mais poder e privacidade.",
      "home.history": "Histórico",
      "home.history.desc": "Veja rapidamente suas sessões recentes.",
      "login.title": "Entrar",
      "login.subtitle": "Entre para acessar configurações e histórico.",
      "login.email": "E-mail",
      "login.password": "Senha",
      "login.button": "Entrar",
      "login.noaccount": "Ainda não tem conta?",
      "login.registerlink": "Registrar",
      "register.title": "Criar conta",
      "register.subtitle": "O nome de usuário será exibido no canto superior após o login.",
      "register.username": "Nome de usuário",
      "register.email": "E-mail",
      "register.password": "Senha",
      "register.confirm": "Confirmar senha",
      "register.rules": "Senha: ≥ 8 caracteres, 2 dígitos, 1 especial, 1 maiúscula.",
      "register.button": "Registrar",
      "register.already": "Já tem conta?",
      "register.loginlink": "Entrar",
      "footer.text": "Copiloto de Pesquisa IA • © 2025",
    },

    /* ===== Turkish ===== */
    tr: {
      "nav.dashboard": "Panel",
      "nav.settings": "Ayarlar",
      "nav.history": "Geçmiş",
      "nav.login": "Giriş",
      "nav.register": "Kayıt ol",
      "nav.theme": "Tema",
      "home.title": "DuoMind'e hoş geldiniz",
      "home.subtitle": "İki LLM'li odaklı bir araştırma yardımcısı. Giriş yapın, anahtarlarınızı ayarlayın ve başlayın.",
      "home.search": "DuoMind'den GPT ve Gemini'yi bir konuda karşılaştırmasını isteyin…",
      "home.guest": "Şu anda misafir modundasınız. Lütfen geçmişi ve API anahtarlarını kaydetmek için kayıt olun veya giriş yapın.",
      "home.dual": "Dual LLM",
      "home.dual.desc": "GPT + Gemini'yi birlikte çalıştırın ve bakış açılarını karşılaştırın.",
      "home.byok": "BYOK",
      "home.byok.desc": "Daha fazla güç ve gizlilik için kendi API anahtarlarınızı kullanın.",
      "home.history": "Geçmiş",
      "home.history.desc": "Son araştırma oturumlarınızı tek bakışta görün.",
      "login.title": "Giriş",
      "login.subtitle": "Ayarlar ve geçmişe erişmek için giriş yapın.",
      "login.email": "E-posta",
      "login.password": "Şifre",
      "login.button": "Giriş",
      "login.noaccount": "Hesabınız yok mu?",
      "login.registerlink": "Kayıt ol",
      "register.title": "Hesap oluştur",
      "register.subtitle": "Kullanıcı adı girişten sonra sağ üstte görünecek.",
      "register.username": "Kullanıcı adı",
      "register.email": "E-posta",
      "register.password": "Şifre",
      "register.confirm": "Şifreyi onayla",
      "register.rules": "Şifre: ≥8 karakter, 2 sayı, 1 özel, 1 büyük harf.",
      "register.button": "Kayıt ol",
      "register.already": "Zaten hesabınız var mı?",
      "register.loginlink": "Giriş",
      "footer.text": "YZ Araştırma Asistanı • © 2025",
    },

    /* ===== Russian ===== */
    ru: {
      "nav.dashboard": "Панель",
      "nav.settings": "Настройки",
      "nav.history": "История",
      "nav.login": "Вход",
      "nav.register": "Регистрация",
      "nav.theme": "Тема",
      "home.title": "Добро пожаловать в DuoMind",
      "home.subtitle": "Фокусированный помощник для исследований с двумя LLM. Войдите, укажите ключи и начните.",
      "home.search": "Попросите DuoMind сравнить GPT и Gemini по теме…",
      "home.guest": "Вы сейчас в гостевом режиме. Зарегистрируйтесь или войдите, чтобы сохранять историю и ключи API.",
      "home.dual": "Два LLM",
      "home.dual.desc": "Запускайте GPT и Gemini вместе и сравнивайте ответы.",
      "home.byok": "BYOK",
      "home.byok.desc": "Используйте свои ключи API для большей мощности и приватности.",
      "home.history": "История",
      "home.history.desc": "Смотрите последние сессии исследований.",
      "login.title": "Вход",
      "login.subtitle": "Войдите, чтобы получить доступ к настройкам и истории.",
      "login.email": "E-mail",
      "login.password": "Пароль",
      "login.button": "Войти",
      "login.noaccount": "Нет аккаунта?",
      "login.registerlink": "Зарегистрироваться",
      "register.title": "Создать аккаунт",
      "register.subtitle": "Имя пользователя будет видно вверху справа после входа.",
      "register.username": "Имя пользователя",
      "register.email": "E-mail",
      "register.password": "Пароль",
      "register.confirm": "Подтвердите пароль",
      "register.rules": "Пароль: ≥8 символов, 2 цифры, 1 спецсимвол, 1 заглавная.",
      "register.button": "Зарегистрироваться",
      "register.already": "Уже есть аккаунт?",
      "register.loginlink": "Войти",
      "footer.text": "ИИ-помощник для исследований • © 2025",
    },

    /* ===== Japanese ===== */
    ja: {
      "nav.dashboard": "ダッシュボード",
      "nav.settings": "設定",
      "nav.history": "履歴",
      "nav.login": "ログイン",
      "nav.register": "登録",
      "nav.theme": "テーマ",
      "home.title": "DuoMind へようこそ",
      "home.subtitle": "2つのLLMを使ったリサーチ用コパイロットです。ログインしてキーを設定し、開始してください。",
      "home.search": "GPTとGeminiをあるトピックで比較するようDuoMindに依頼…",
      "home.guest": "現在ゲストモードです。履歴とAPIキーを保存するにはログインまたは登録してください。",
      "home.dual": "デュアル LLM",
      "home.dual.desc": "GPTとGeminiを同時に実行し、視点を比較します。",
      "home.byok": "BYOK",
      "home.byok.desc": "自分のAPIキーを使用して、より強力かつプライベートに。",
      "home.history": "履歴",
      "home.history.desc": "最近のリサーチセッションをすぐに確認できます。",
      "login.title": "ログイン",
      "login.subtitle": "設定と履歴にアクセスするにはログインします。",
      "login.email": "メール",
      "login.password": "パスワード",
      "login.button": "ログイン",
      "login.noaccount": "アカウントがありませんか？",
      "login.registerlink": "登録",
      "register.title": "アカウント作成",
      "register.subtitle": "ログイン後に右上にユーザー名が表示されます。",
      "register.username": "ユーザー名",
      "register.email": "メール",
      "register.password": "パスワード",
      "register.confirm": "パスワードを確認",
      "register.rules": "パスワード: 8文字以上、数字2つ、記号1つ、大文字1つ。",
      "register.button": "登録",
      "register.already": "すでにアカウントがありますか？",
      "register.loginlink": "ログイン",
      "footer.text": "AI リサーチコパイロット • © 2025",
    },

    /* ===== Korean ===== */
    ko: {
      "nav.dashboard": "대시보드",
      "nav.settings": "설정",
      "nav.history": "기록",
      "nav.login": "로그인",
      "nav.register": "가입",
      "nav.theme": "테마",
      "home.title": "DuoMind에 오신 것을 환영합니다",
      "home.subtitle": "2개의 LLM을 사용하는 집중 연구 코파일럿입니다. 로그인하고 키를 설정한 뒤 시작하세요.",
      "home.search": "GPT와 Gemini를 주제별로 비교하도록 DuoMind에 요청하세요…",
      "home.guest": "현재 게스트 모드입니다. 기록과 API 키를 저장하려면 로그인하거나 가입하세요.",
      "home.dual": "듀얼 LLM",
      "home.dual.desc": "GPT와 Gemini를 함께 실행하고 관점을 비교합니다.",
      "home.byok": "BYOK",
      "home.byok.desc": "자신의 API 키로 더 강력하고 안전하게 사용하세요.",
      "home.history": "기록",
      "home.history.desc": "최근 연구 세션을 한눈에 확인하세요.",
      "login.title": "로그인",
      "login.subtitle": "설정과 기록에 접근하려면 로그인하세요.",
      "login.email": "이메일",
      "login.password": "비밀번호",
      "login.button": "로그인",
      "login.noaccount": "계정이 없으신가요?",
      "login.registerlink": "가입",
      "register.title": "계정 만들기",
      "register.subtitle": "로그인 후 오른쪽 위에 사용자명이 표시됩니다.",
      "register.username": "사용자명",
      "register.email": "이메일",
      "register.password": "비밀번호",
      "register.confirm": "비밀번호 확인",
      "register.rules": "비밀번호: 8자 이상, 숫자 2개, 특수문자 1개, 대문자 1개.",
      "register.button": "가입",
      "register.already": "이미 계정이 있으신가요?",
      "register.loginlink": "로그인",
      "footer.text": "AI 리서치 코파일럿 • © 2025",
    },

    /* ===== Chinese (simplified) ===== */
    zh: {
      "nav.dashboard": "仪表盘",
      "nav.settings": "设置",
      "nav.history": "历史",
      "nav.login": "登录",
      "nav.register": "注册",
      "nav.theme": "主题",
      "home.title": "欢迎使用 DuoMind",
      "home.subtitle": "一个专注的双LLM研究副驾。登录、设置密钥并开始探索。",
      "home.search": "让 DuoMind 比较一下 GPT 和 Gemini 的某个主题…",
      "home.guest": "您当前处于访客模式。请注册或登录以保存历史和 API 密钥。",
      "home.dual": "双 LLM",
      "home.dual.desc": "同时运行 GPT 和 Gemini 并对比观点。",
      "home.byok": "自带密钥",
      "home.byok.desc": "使用自己的 API 密钥，获得更高的能力和隐私。",
      "home.history": "历史",
      "home.history.desc": "一眼查看最近的研究会话。",
      "login.title": "登录",
      "login.subtitle": "登录以访问设置和历史。",
      "login.email": "邮箱",
      "login.password": "密码",
      "login.button": "登录",
      "login.noaccount": "还没有账号？",
      "login.registerlink": "注册",
      "register.title": "创建账号",
      "register.subtitle": "登录后用户名将显示在右上角。",
      "register.username": "用户名",
      "register.email": "邮箱",
      "register.password": "密码",
      "register.confirm": "确认密码",
      "register.rules": "密码至少8位，包含2个数字、1个特殊字符和1个大写字母。",
      "register.button": "注册",
      "register.already": "已经有账号？",
      "register.loginlink": "登录",
      "footer.text": "AI 研究副驾 • © 2025",
    },

    /* ===== Thai ===== */
    th: {
      "nav.dashboard": "แดชบอร์ด",
      "nav.settings": "ตั้งค่า",
      "nav.history": "ประวัติ",
      "nav.login": "เข้าสู่ระบบ",
      "nav.register": "สมัคร",
      "nav.theme": "ธีม",
      "home.title": "ยินดีต้อนรับสู่ DuoMind",
      "home.subtitle": "ผู้ช่วยวิจัยที่ใช้ LLM สองตัว ล็อกอิน ตั้งค่าคีย์ แล้วเริ่มเลย",
      "home.search": "ให้ DuoMind เปรียบเทียบ GPT และ Gemini ในหัวข้อหนึ่ง…",
      "home.guest": "ตอนนี้คุณอยู่ในโหมดผู้เยี่ยมชม โปรดสมัครหรือเข้าสู่ระบบเพื่อบันทึกประวัติและ API key",
      "home.dual": "Dual LLM",
      "home.dual.desc": "รัน GPT + Gemini พร้อมกันและเปรียบเทียบมุมมอง",
      "home.byok": "BYOK",
      "home.byok.desc": "ใช้ API key ของคุณเองเพื่อพลังและความเป็นส่วนตัวสูงสุด",
      "home.history": "ประวัติ",
      "home.history.desc": "ดูเซสชันการวิจัยล่าสุดของคุณได้ทันที",
      "login.title": "เข้าสู่ระบบ",
      "login.subtitle": "เข้าสู่ระบบเพื่อเข้าถึงการตั้งค่าและประวัติ",
      "login.email": "อีเมล",
      "login.password": "รหัสผ่าน",
      "login.button": "เข้าสู่ระบบ",
      "login.noaccount": "ยังไม่มีบัญชี?",
      "login.registerlink": "สมัคร",
      "register.title": "สร้างบัญชี",
      "register.subtitle": "ชื่อผู้ใช้จะแสดงด้านขวาบนหลังเข้าสู่ระบบ",
      "register.username": "ชื่อผู้ใช้",
      "register.email": "อีเมล",
      "register.password": "รหัสผ่าน",
      "register.confirm": "ยืนยันรหัสผ่าน",
      "register.rules": "รหัสผ่าน ≥ 8 ตัว มีตัวเลข 2 ตัว อักขระพิเศษ 1 ตัว ตัวใหญ่ 1 ตัว",
      "register.button": "สมัคร",
      "register.already": "มีบัญชีแล้ว?",
      "register.loginlink": "เข้าสู่ระบบ",
      "footer.text": "ผู้ช่วยวิจัย AI • © 2025",
    },

    /* ===== Indonesian ===== */
    id: {
      "nav.dashboard": "Dasbor",
      "nav.settings": "Pengaturan",
      "nav.history": "Riwayat",
      "nav.login": "Masuk",
      "nav.register": "Daftar",
      "nav.theme": "Tema",
      "home.title": "Selamat datang di DuoMind",
      "home.subtitle": "Kopilot riset dengan dua LLM. Masuk, atur kunci Anda, dan mulai.",
      "home.search": "Minta DuoMind membandingkan GPT dan Gemini tentang suatu topik…",
      "home.guest": "Anda sedang dalam mode tamu. Daftar atau masuk untuk menyimpan riwayat dan kunci API.",
      "home.dual": "Dual LLM",
      "home.dual.desc": "Jalankan GPT + Gemini bersama dan bandingkan perspektif.",
      "home.byok": "BYOK",
      "home.byok.desc": "Gunakan kunci API Anda sendiri untuk kekuatan dan privasi penuh.",
      "home.history": "Riwayat",
      "home.history.desc": "Lihat sesi riset terakhir Anda secara cepat.",
      "login.title": "Masuk",
      "login.subtitle": "Masuk untuk mengakses pengaturan dan riwayat.",
      "login.email": "Email",
      "login.password": "Kata sandi",
      "login.button": "Masuk",
      "login.noaccount": "Belum punya akun?",
      "login.registerlink": "Daftar",
      "register.title": "Buat Akun",
      "register.subtitle": "Nama pengguna akan muncul di kanan atas setelah login.",
      "register.username": "Nama pengguna",
      "register.email": "Email",
      "register.password": "Kata sandi",
      "register.confirm": "Konfirmasi kata sandi",
      "register.rules": "Kata sandi ≥ 8 karakter, 2 angka, 1 karakter khusus, 1 huruf besar.",
      "register.button": "Daftar",
      "register.already": "Sudah punya akun?",
      "register.loginlink": "Masuk",
      "footer.text": "Kopilot Riset AI • © 2025",
    },
  };

  function apply(lang) {
    const bundle = dict[lang] || dict.en;
    document.querySelectorAll("[data-i18n]").forEach((el) => {
      const k = el.getAttribute("data-i18n");
      if (bundle[k]) el.textContent = bundle[k];
    });
    document.querySelectorAll("[data-i18n-placeholder]").forEach((el) => {
      const k = el.getAttribute("data-i18n-placeholder");
      if (bundle[k]) el.setAttribute("placeholder", bundle[k]);
    });
  }

  function init(langOpt) {
    const lang = langOpt || getCookie(COOKIE_KEY) || "en";
    apply(lang);
    setCookie(COOKIE_KEY, lang);
    const sel = document.getElementById("lang-select");
    if (sel) sel.value = lang;
  }

  global.DuoMindI18N = {
    init,
    setLang: function (lang) {
      apply(lang);
      setCookie(COOKIE_KEY, lang);
      const sel = document.getElementById("lang-select");
      if (sel) sel.value = lang;
    },
  };

  document.addEventListener("DOMContentLoaded", function () {
    init();
  });
})(window);
